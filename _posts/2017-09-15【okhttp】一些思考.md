

## 概述

`okhttp`的出现已经很久了，还记得我一开始使用的时候实在是理解不了为什么`okhttp`返回的`Response`获取一个字符串要调用`response.body().string()`如此复杂。

直到最近项目没有那么大的开发压力，我才有时间去思考这一个问题~

<!-- more -->


## Volley

`Volley`身为上一代的网络请求库，现在也已经逐渐到了光荣退役的时候了，但其带给我们的思考，仍然有积极效应。

**`Volley`框架的核心在于：`PoolingByteArrayOutputStream`和`ByteArrayPool`的配合使用，使之能够应对高频、量小的网络请求**

`Volley`在设计上是不符合大文件、大图下载的，这是它的先天缺陷，那么`okhttp`当然需要在此之上有所创新。



## 专注于网络请求

一开始用`okhttp`实际上感觉不是特别好用，后来我才意识到，这是由于它专注于网络请求造成的。

`okhttp`并不是像`Volley`那样子，为了方便开发者进行快速开发的库。对于`okhttp`而言，它只关心完成网络请求。

至此，就能回答一开始的问题了。 这是因为`response.body()`是包含了网络的输入流的，也就是说，得到Response的时候，实际上你还没有完成一次真正意义上的网络请求，还需要进行后续的输入流的操作。 

这个操作是和网络请求无关的，所以`okhttp`将处理权交回给了开发者。

为什么呢？

我个人观点认为是：由于目前App的体量不断扩大，不单单只有数据量小的请求了。为了应对更加复杂的使用场景，所以`okhttp`并没有做出后续流的处理











